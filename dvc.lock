schema: '2.0'
stages:
  fetch_data:
    cmd: python src_versioning/data_preprocess.py --output data/raw/gold_snapshot_latest.csv
    deps:
    - path: src_versioning/data_preprocess.py
      hash: md5
      md5: 3027c9b0b976199ad22cca9503204eb5
      size: 3691
    outs:
    - path: data/raw/gold_snapshot_latest.csv
      hash: md5
      md5: fb0d6fa708afd084da6a6eaf7f7ccac8
      size: 124430
  train_model:
    cmd: python src_versioning/train_model.py --input data/raw/gold_snapshot_latest.csv
      --output models/gold_lstm_model.pkl
    deps:
    - path: data/raw/gold_snapshot_latest.csv
      hash: md5
      md5: fb0d6fa708afd084da6a6eaf7f7ccac8
      size: 124430
    - path: src_versioning/train_model.py
      hash: md5
      md5: 4f40d00cab42c92e0baa29cd71c81d24
      size: 3991
    outs:
    - path: models/gold_lstm_model.pkl
      hash: md5
      md5: d449b2777e5300bfed7e166844b1a322
      size: 424797
  update_metadata:
    cmd: python src_versioning/metadata_updater.py
    deps:
    - path: models/gold_lstm_model.pkl
      hash: md5
      md5: d449b2777e5300bfed7e166844b1a322
      size: 424797
    - path: src_versioning/metadata_updater.py
      hash: md5
      md5: 9973347bc1e4debf2c00fa79f7d46a1f
      size: 1059
    outs:
    - path: models/model_metadata.json
      hash: md5
      md5: 76c38394547d8823a421aca65b4cb020
      size: 81
  validate_data:
    cmd: great_expectations checkpoint run gold_prices_checkpoint1
    deps:
    - path: data/raw/gold_snapshot_latest.csv
      hash: md5
      md5: fb0d6fa708afd084da6a6eaf7f7ccac8
      size: 124430
    - path: great_expectations/checkpoints/gold_prices_checkpoint1.yml
      hash: md5
      md5: f9314240ffebb93977cd277dac040a2f
      size: 826
    - path: great_expectations/expectations/Gold_Prices_Suite.json
      hash: md5
      md5: 1adc0557ab11020bd3b005926580bd4a
      size: 3651
    outs:
    - path: great_expectations/uncommitted/data_docs/local_site/
      hash: md5
      md5: eafe679d2034a2988f87696e3b9bc0fa.dir
      size: 4202340
      nfiles: 23
    - path: great_expectations/uncommitted/validations/
      hash: md5
      md5: bf640fd941810d646ac56e3134c3115a.dir
      size: 11003
      nfiles: 2
