schema: '2.0'
stages:
  fetch_data:
    cmd: python src_versioning/data_preprocess.py --output data/raw/gold_snapshot_latest.csv
    deps:
    - path: src_versioning/data_preprocess.py
      hash: md5
      md5: 3027c9b0b976199ad22cca9503204eb5
      size: 3691
    outs:
    - path: data/raw/gold_snapshot_latest.csv
      hash: md5
      md5: f3d396c34e698b1b316853944a7d39c8
      size: 124524
  train_model:
    cmd: python src_versioning/train_model.py --input data/raw/gold_snapshot_latest.csv
      --output models/gold_lstm_model.pkl
    deps:
    - path: data/raw/gold_snapshot_latest.csv
      hash: md5
      md5: f3d396c34e698b1b316853944a7d39c8
      size: 124524
    - path: src_versioning/train_model.py
      hash: md5
      md5: 4f40d00cab42c92e0baa29cd71c81d24
      size: 3991
    outs:
    - path: models/gold_lstm_model.pkl
      hash: md5
      md5: d449b2777e5300bfed7e166844b1a322
      size: 424797
  update_metadata:
    cmd: python src_versioning/metadata_updater.py
    deps:
    - path: models/gold_lstm_model.pkl
      hash: md5
      md5: d449b2777e5300bfed7e166844b1a322
      size: 424797
    - path: src_versioning/metadata_updater.py
      hash: md5
      md5: 9973347bc1e4debf2c00fa79f7d46a1f
      size: 1059
    outs:
    - path: models/model_metadata.json
      hash: md5
      md5: bbbc8c365ae555e8f2f41dee70379864
      size: 81
  validate_data:
    cmd: great_expectations checkpoint run gold_prices_checkpoint1
    deps:
    - path: data/raw/gold_snapshot_latest.csv
      hash: md5
      md5: f3d396c34e698b1b316853944a7d39c8
      size: 124524
    - path: great_expectations/checkpoints/gold_prices_checkpoint1.yml
      hash: md5
      md5: f9314240ffebb93977cd277dac040a2f
      size: 826
    - path: great_expectations/expectations/Gold_Prices_Suite.json
      hash: md5
      md5: 1adc0557ab11020bd3b005926580bd4a
      size: 3651
    outs:
    - path: great_expectations/uncommitted/data_docs/local_site/
      hash: md5
      md5: 8592e7d1f266e86ee23871099d770ca9.dir
      size: 4202340
      nfiles: 23
    - path: great_expectations/uncommitted/validations/
      hash: md5
      md5: a71b228d77d304581ef665aa1bba8d2b.dir
      size: 11003
      nfiles: 2
